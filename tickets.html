<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Tickets - Evently Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Evently
  * Template URL: https://bootstrapmade.com/evently-bootstrap-events-template/
  * Updated: Jul 19 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="tickets-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <img src="logo.png" alt="">
        <h1 class="sitename"></h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li class="dropdown">
  <a href="" class="dropdown-toggle">
    Informasi
  </a>
  <ul class="dropdown-menu">
    <li><a href="informasi.html">Race</a></li>
    <li><a href="size.html">Size Chart</a></li>
    <li><a href="rutemap.html">Rute</a></li>
  </ul>
</li>
          <li><a href="tickets.html">Buy Ticket</a></li>
          <li><a href="regulasi.html">Regulasi</a></li>
          <li><a href="participants.html">Participants</a></li>
          <li><a href="carapendaftaran.html">Cara Pendaftaran</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="tickets.html">Buy Tickets</a>

    </div>
  </header>

  <main class="main">

 
<div class="brosur-wrap">

  <div class="brosur-left-col">
    <div class="brosur-main-img">
      <img id="brosurMainImg"
        src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEioWbmotOx0qcrIAVLs3LmT4WldvAQ30qriw2dG5SAGKzObEXxcLR4PXLt0QqY7L4FlyaV_lqfuivjFMGusAMeJHOp7VfvnQgSNaWsHos1mkwv2xFsiEw5Omusm3Kw9vnMnFa5niKDnmtuwkHqAIFJpLjAIr3hapydOzCYcsJEXLnncpZgdTvPZql4Z3-4/s1800/DISPLAY%20INSTRAM%20-%20WARU%20TURI%20FUN%20RUN%20-%20COMING%20SOON%20v3.webp">
    </div>

    <div class="brosur-thumbs">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEioWbmotOx0qcrIAVLs3LmT4WldvAQ30qriw2dG5SAGKzObEXxcLR4PXLt0QqY7L4FlyaV_lqfuivjFMGusAMeJHOp7VfvnQgSNaWsHos1mkwv2xFsiEw5Omusm3Kw9vnMnFa5niKDnmtuwkHqAIFJpLjAIr3hapydOzCYcsJEXLnncpZgdTvPZql4Z3-4/s1800/DISPLAY%20INSTRAM%20-%20WARU%20TURI%20FUN%20RUN%20-%20COMING%20SOON%20v3.webp"
           onclick="changeBrosurImg(this.src)">
      
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh-2K02gk8kND9EayIqnhyphenhyphen939B43iHEa10BaT0KMHTSK-4gmuDNpPnhpye6onMV6Aw6JZrugqWadDoqbe9cjFjPApDhT1Afj_5KzQo7DITx2sS_vnsmLgSpTSDrLvA3uRUp4ce5isqni9QXBQu1UdgvpW10oJ3o8EpyN-MvTcYD1hCvl4MeXTTcEtz6I_I/s1600/jersey.webp"
           onclick="changeBrosurImg(this.src)">
      
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg1AqQH45xPZGiPjYennUpsZehpngMMd91w7RF5kCSpc4VRA_VPmKSL88661pyHIjWJ3I86Gz82dswk8QfzeMjDg-FPkGlC4OTjRbQTnoPXrsWRtBwnPxIjjkbRZ_D3VedVNd3HP74gXfrY2Sz5B_2ID7n65p7jiM6swYjcBTn_4-lxXMRHYhQBLYe24GE/s1600/ticket10k.webp"
           onclick="changeBrosurImg(this.src)">
    </div>

    <div class="race-categories">
        <div class="cat-card">
            <div class="cat-icon">5K</div>
            <div class="cat-detail">
                <h5>Fun Run (5KM)</h5>
                <p>Cocok untuk pemula & keluarga. Rute datar mengelilingi landmark kota dengan suasana ceria.</p>
            </div>
        </div>
        <div class="cat-card">
            <div class="cat-icon ten-k">10K</div>
            <div class="cat-detail">
                <h5>Pro Race (10KM)</h5>
                <p>Tantangan kompetitif untuk pelari berpengalaman. Elevasi menantang & hadiah podium.</p>
            </div>
        </div>
    </div>
  </div>

  <div class="brosur-info">
    <div class="tag-event">Official Event 2026</div>
    <h1>Waruturi Run 2026</h1>
    <div class="brosur-price">
        Rp150.000 <span>/ tiket mulai dari</span>
    </div>

    <div class="brosur-desc">
      Bergabunglah dalam event lari terbesar tahun ini! Dapatkan pengalaman lari tak terlupakan dengan rute steril, water station lengkap, dan medali finisher eksklusif.
    </div>

    <div class="info-grid">
        <div class="info-box">
          <h4>üìÖ Waktu & Tempat</h4>
          <ul>
            <li>Minggu, 15 Juni 2026</li>
            <li>Start 05.30 WIB</li>
            <li>Alun-Alun Kota Kediri</li>
          </ul>
        </div>

        <div class="info-box">
          <h4>üéÅ Fasilitas (Race Pack)</h4>
          <ul>
            <li>Jersey Dry-Fit Premium</li>
            <li>Medali Logam Finisher</li>
            <li>BIB Number + Timing Chip</li>
          </ul>
        </div>
    </div>

    <div class="brosur-cta">
      <button type="button" onclick="openPopup()">PESAN TIKET SEKARANG</button>
    </div>
  </div>

</div>

<script>
    function changeBrosurImg(src) {
        document.getElementById('brosurMainImg').src = src;
        const thumbs = document.querySelectorAll('.brosur-thumbs img');
        thumbs.forEach(img => img.classList.remove('active'));
        event.target.classList.add('active');
    }
</script>

<script>
function changeBrosurImg(src){
  document.getElementById("brosurMainImg").src = src;
}
</script>

<div class="modal-overlay" id="regModal" style="display:none;">
    <div class="modal-main-container">
        
        <div class="modal-top-bar">
            <h2>Pendaftaran Waruturi Run 2026</h2>
            <span class="close-modal">√ó</span>
        </div>

        <div class="modal-scroll-area">
            <div class="modal-grid-layout">
                
                <div class="card-style form-side">
                    
                    <div id="participantContainer">
                        <div class="form-section participant-card" data-index="0">
                            <h3 class="section-title">1. Data Pemesan / Peserta 1</h3>
                            
                            <div class="form-row">
                                <div class="form-group full">
                                    <label>Nama Lengkap (Sesuai ID)</label>
                                    <input class="input-name" type="text" placeholder="Nama Lengkap">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group full">
                                    <label>Jenis Kelamin</label>
                                    <select class="input-gender">
                                        <option value="Pria">Pria</option>
                                        <option value="Wanita">Wanita</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group half">
                                    <label>Jenis ID</label>
                                    <select class="input-id-type">
                                        <option>KTP</option>
                                        <option>SIM</option>
                                        <option>Kartu Pelajar</option>
                                    </select>
                                </div>
                                <div class="form-group half">
                                    <label>Nomor ID</label>
                                    <input class="input-id-num" type="tel" placeholder="NIK / No SIM">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group half">
                                    <label>Email</label>
                                    <input class="input-email" type="email" placeholder="email@anda.com">
                                </div>
                                <div class="form-group half">
                                    <label>WhatsApp</label>
                                    <input class="input-wa" type="tel" placeholder="08...">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group full">
                                    <label>Alamat Lengkap</label>
                                    <input class="input-address" type="text" placeholder="Nama Jalan, Kota, Provinsi">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="additionalParticipants"></div>

                    <div class="form-section">
                        <h3 class="section-title">2. Kategori Tiket</h3>
                        
                        <div class="ticket-grid">
                            <label class="ticket-card" onclick="updateTicket('5K', 150000)">
                                <input checked name="raceCategory" type="radio">
                                <div class="tc-content">
                                    <div class="tc-details">
                                        <span class="tc-name">5K Fun Run</span>
                                        <span class="tc-desc">Rute santai dalam kota</span>
                                        <span class="tc-price">Rp150.000</span>
                                    </div>
                                    <div class="tc-image">
                                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj6lx1vpnZvkNYdUtUPJYTsF_2xYH_t0rV_pbpIagJ_R7tfIsriquY9h_uYP9UN7QDt_urIRnhNGbX-8x2G4fkDkRBVTGrlcI299HCuRzZ-4Wdhu44HliVeP9JV116a5BpoFBxsfXd__PZymEA7G5ob_iUO7Pkoo0d79-m64lsk_tCQcgwXO5ucRlxMxxY/s1600/ticket5k.webp">
                                    </div>
                                </div>
                            </label>
                            
                            <label class="ticket-card" onclick="updateTicket('10K', 250000)">
                                <input name="raceCategory" type="radio">
                                <div class="tc-content">
                                    <div class="tc-details">
                                        <span class="tc-name">10K Race</span>
                                        <span class="tc-desc">Kompetisi profesional</span>
                                        <span class="tc-price">Rp250.000</span>
                                    </div>
                                    <div class="tc-image">
                                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg1AqQH45xPZGiPjYennUpsZehpngMMd91w7RF5kCSpc4VRA_VPmKSL88661pyHIjWJ3I86Gz82dswk8QfzeMjDg-FPkGlC4OTjRbQTnoPXrsWRtBwnPxIjjkbRZ_D3VedVNd3HP74gXfrY2Sz5B_2ID7n65p7jiM6swYjcBTn_4-lxXMRHYhQBLYe24GE/s1600/ticket10k.webp">
                                    </div>
                                </div>
                            </label>
                        </div>

                        <div class="qty-section">
                            <div class="qty-text">
                                <label>Jumlah Peserta</label>
                                <span class="qty-hint" id="ticketTypeHint" style="color: rgb(16, 185, 129);">Mode: Solo</span>
                            </div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="updateQty('ticket', -1)">‚àí</button>
                                <input type="number" id="ticketQty" value="1" readonly>
                                <button class="qty-btn" onclick="updateQty('ticket', 1)">+</button>
                            </div>
                        </div>
                        
                        <div id="ticketListContainer" class="jersey-sizes-container"></div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">3. Merchandise Jersey</h3>
                        <div class="img-preview">
                            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh-2K02gk8kND9EayIqnhyphenhyphen939B43iHEa10BaT0KMHTSK-4gmuDNpPnhpye6onMV6Aw6JZrugqWadDoqbe9cjFjPApDhT1Afj_5KzQo7DITx2sS_vnsmLgSpTSDrLvA3uRUp4ce5isqni9QXBQu1UdgvpW10oJ3o8EpyN-MvTcYD1hCvl4MeXTTcEtz6I_I/s1600/jersey.webp">
                        </div>

                        <div class="qty-section">
                            <div class="qty-text">
                                <label>Jumlah Jersey</label>
                                <span class="qty-hint">Jersey Gratis per Peserta</span>
                            </div>
                            <div class="qty-controls">
                                <button class="qty-btn" disabled>‚àí</button>
                                <input type="number" id="jerseyQty" value="1" readonly>
                                <button class="qty-btn" disabled>+</button>
                            </div>
                        </div>

                        <div id="jerseySizesContainer" class="jersey-sizes-container"></div>
                        <div id="sizeDetailBox" class="size-detail-box">Info Ukuran <b>S</b>: Lebar Dada 48cm | Panjang 68cm</div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">4. Metode Pembayaran</h3>
                        <div class="bank-grid">
                            <label class="bank-card-option">
                                <input checked name="paymentMethod" type="radio" value="BCA" data-type="BANK" data-rek="000-000-000" data-an="CV WARUTURI RUN" data-logo="https://upload.wikimedia.org/wikipedia/commons/5/5c/Bank_Central_Asia.svg">
                                <div class="bank-card-visual">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5c/Bank_Central_Asia.svg" class="bank-logo-img">
                                    <span class="bank-title">BCA</span>
                                </div>
                            </label>
                            <label class="bank-card-option">
                                <input name="paymentMethod" type="radio" value="BRI" data-type="BANK" data-rek="003301005730306" data-an="Jagad Presindo Kuatama" data-logo="https://upload.wikimedia.org/wikipedia/commons/6/68/BANK_BRI_logo.svg">
                                <div class="bank-card-visual">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/68/BANK_BRI_logo.svg" class="bank-logo-img">
                                    <span class="bank-title">BRI</span>
                                </div>
                            </label>
                            <label class="bank-card-option">
                                <input name="paymentMethod" type="radio" value="Mandiri" data-type="BANK" data-rek="000-000-000-000" data-an="CV WARUTURI RUN" data-logo="https://upload.wikimedia.org/wikipedia/commons/a/ad/Bank_Mandiri_logo_2016.svg">
                                <div class="bank-card-visual">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/a/ad/Bank_Mandiri_logo_2016.svg" class="bank-logo-img">
                                    <span class="bank-title">Mandiri</span>
                                </div>
                            </label>
                            <label class="bank-card-option">
                                <input name="paymentMethod" type="radio" value="QRIS" data-type="QRIS" data-logo="https://upload.wikimedia.org/wikipedia/commons/a/a2/Logo_QRIS.svg">
                                <div class="bank-card-visual qris-card">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a2/Logo_QRIS.svg" class="bank-logo-img">
                                    <span class="bank-title">QRIS</span>
                                </div>
                            </label>
                        </div>

                        <div id="paymentDetailInfo" class="payment-detail-box" style="display: block;">
                            </div>
                    </div>

                    <div class="tnc-wrapper">
                        <label class="tnc-label">
                            <input type="checkbox" id="tncCheckbox" class="tnc-checkbox">
                            <span>Saya menyetujui <a href="https://waruturifunrun.blogspot.com/p/regulasi.html" target="_blank" class="tnc-link">syarat dan ketentuan</a> yang berlaku.</span>
                        </label>
                    </div>
                    <button class="pay-btn" id="submitBtn">KONFIRMASI & BAYAR</button>
                </div>

                <div class="card-style summary-side">
                    <div class="sticky-summ">
                        <h3>Ringkasan Pesanan</h3>
                        
                        <div class="summ-item">
                            <img id="summTicketImg" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj6lx1vpnZvkNYdUtUPJYTsF_2xYH_t0rV_pbpIagJ_R7tfIsriquY9h_uYP9UN7QDt_urIRnhNGbX-8x2G4fkDkRBVTGrlcI299HCuRzZ-4Wdhu44HliVeP9JV116a5BpoFBxsfXd__PZymEA7G5ob_iUO7Pkoo0d79-m64lsk_tCQcgwXO5ucRlxMxxY/s1600/ticket5k.webp">
                            <div>
                                <div class="summ-name" id="summTicketName">Tiket 5K Fun Run</div>
                                <div class="summ-val" id="summTicketDetail">1 Pax</div>
                            </div>
                        </div>

                        <div class="summ-item">
                            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh-2K02gk8kND9EayIqnhyphenhyphen939B43iHEa10BaT0KMHTSK-4gmuDNpPnhpye6onMV6Aw6JZrugqWadDoqbe9cjFjPApDhT1Afj_5KzQo7DITx2sS_vnsmLgSpTSDrLvA3uRUp4ce5isqni9QXBQu1UdgvpW10oJ3o8EpyN-MvTcYD1hCvl4MeXTTcEtz6I_I/s1600/jersey.webp">
                            <div>
                                <div class="summ-name">Jersey</div>
                                <div class="summ-val" id="summJerseyDetail">1 Pcs</div>
                            </div>
                        </div>

                        <div class="summ-line"></div>

                        <div class="summ-row"><span>Total Tiket</span><span id="txtTicketTotal">Rp150.000</span></div>
                        <div class="summ-row"><span>Total Jersey</span><span id="txtJerseyTotal">Rp0</span></div>
                        
                        <div class="summ-total">
                            <span>TOTAL</span>
                            <span id="grandTotal">Rp150.000</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
(function () {

  /* ================== CONFIG ================== */
  const ADMIN_WA = "6281234567890"; // GANTI NOMOR WA ADMIN
  const TICKET_DATA = {
    "5K": { name:"5K Fun Run", price:150000, img:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj6lx1vpnZvkNYdUtUPJYTsF_2xYH_t0rV_pbpIagJ_R7tfIsriquY9h_uYP9UN7QDt_urIRnhNGbX-8x2G4fkDkRBVTGrlcI299HCuRzZ-4Wdhu44HliVeP9JV116a5BpoFBxsfXd__PZymEA7G5ob_iUO7Pkoo0d79-m64lsk_tCQcgwXO5ucRlxMxxY/s1600/ticket5k.webp" },
    "10K": { name:"10K Race", price:250000, img:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg1AqQH45xPZGiPjYennUpsZehpngMMd91w7RF5kCSpc4VRA_VPmKSL88661pyHIjWJ3I86Gz82dswk8QfzeMjDg-FPkGlC4OTjRbQTnoPXrsWRtBwnPxIjjkbRZ_D3VedVNd3HP74gXfrY2Sz5B_2ID7n65p7jiM6swYjcBTn_4-lxXMRHYhQBLYe24GE/s1600/ticket10k.webp" }
  };

  const sizeChart = {
    S:{ld:48,p:68}, M:{ld:50,p:70},
    L:{ld:52,p:72}, XL:{ld:54,p:74}, XXL:{ld:56,p:76}
  };

  let tickets = [{ type:"5K" }]; // Default 1 tiket
  let jerseySizes = ["S"];

  /* ================== DOM ELEMENTS ================== */
  const $ = id => document.getElementById(id);
  const $$ = sel => document.querySelectorAll(sel);

  const submitBtn = $("submitBtn");
  const ticketQty = $("ticketQty");
  const jerseyQty = $("jerseyQty");
  const ticketBox = $("ticketListContainer");
  const jerseyBox = $("jerseySizesContainer");
  const sizeDetail = $("sizeDetailBox");
  const ticketHint = $("ticketTypeHint");
  const addParticipantBox = $("additionalParticipants");
  const payDetailBox = $("paymentDetailInfo");
  const tncCheckbox = $("tncCheckbox");

  // Summary UI
  const uiTicketName = $("summTicketName");
  const uiTicketDetail = $("summTicketDetail");
  const uiTicketImg = $("summTicketImg");
  const uiTicketTotal = $("txtTicketTotal");
  const uiJerseyTotal = $("txtJerseyTotal");
  const uiJerseyDetail = $("summJerseyDetail");
  const uiGrand = $("grandTotal");

  /* ================== LOGIC FORMS PESERTA DINAMIS ================== */
  function renderParticipantForms(count) {
    const currentForms = addParticipantBox.children.length;
    const targetForms = count - 1;

    // Jika tiket bertambah, append form baru LENGKAP
    if (targetForms > currentForms) {
        for (let i = currentForms; i < targetForms; i++) {
            const index = i + 1; // Index peserta (1, 2, 3...)
            const div = document.createElement('div');
            div.className = "form-section participant-card";
            div.dataset.index = index;
            // FORM PESERTA TAMBAHAN LENGKAP - STRUKTUR DIPERBAIKI
            div.innerHTML = `
                <h3 class="section-title">Data Peserta ${index + 1}</h3>
                
                <div class="form-row">
                    <div class="form-group full">
                        <label>Nama Lengkap</label>
                        <input class="input-name" type="text" placeholder="Nama Peserta ${index + 1}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full">
                        <label>Jenis Kelamin</label>
                        <select class="input-gender">
                            <option value="Pria">Pria</option>
                            <option value="Wanita">Wanita</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label>Jenis ID</label>
                        <select class="input-id-type">
                            <option>KTP</option>
                            <option>SIM</option>
                            <option>Kartu Pelajar</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label>Nomor ID</label>
                        <input class="input-id-num" type="tel" placeholder="NIK / No SIM">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label>Email</label>
                        <input class="input-email" type="email" placeholder="email@peserta${index+1}.com">
                    </div>
                    <div class="form-group half">
                        <label>WhatsApp</label>
                        <input class="input-wa" type="tel" placeholder="08...">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full">
                        <label>Alamat Lengkap</label>
                        <input class="input-address" type="text" placeholder="Nama Jalan, Kota, Provinsi">
                    </div>
                </div>
                `;
            addParticipantBox.appendChild(div);
        }
    } 
    // Jika tiket berkurang, hapus form paling bawah
    else if (targetForms < currentForms) {
        while (addParticipantBox.children.length > targetForms) {
            addParticipantBox.removeChild(addParticipantBox.lastChild);
        }
    }
  }

  /* ================== QTY & LOGIC ================== */
  window.updateQty = function(type, delta){
    if(type!=="ticket") return;

    let n = tickets.length + delta;
    if(n<1||n>20) return; // Limit 1-20

    if(delta>0){
      tickets.push({type:tickets[0].type}); // Tambah tiket jenis sama dengan yg pertama
      jerseySizes.push("S");
    } else {
      tickets.pop();
      jerseySizes.pop();
    }

    ticketQty.value = tickets.length;
    jerseyQty.value = jerseySizes.length;

    renderParticipantForms(tickets.length); // Update form data peserta
    renderTicketList();
    renderJersey();
    recalc();
  };

  /* ================== TICKET DROPDOWN LIST ================== */
  function renderTicketList(){
    ticketBox.innerHTML="";
    tickets.forEach((t,i)=>{
      ticketBox.innerHTML+=`
        <div class="jersey-list-item">
          <label>Tiket Peserta #${i+1}</label>
          <select onchange="changeTicket(${i},this.value)">
            <option value="5K" ${t.type==="5K"?"selected":""}>5K Fun Run</option>
            <option value="10K" ${t.type==="10K"?"selected":""}>10K Race</option>
          </select>
        </div>`;
    });
  }

  window.changeTicket=function(i,v){tickets[i].type=v; recalc();}
  window.updateTicket=function(v, price){
    tickets.forEach(t => t.type = v);
    renderTicketList();
    recalc();
  }

  /* ================== JERSEY LIST ================== */
  function renderJersey(){
    jerseyBox.innerHTML="";
    jerseySizes.forEach((s,i)=>{
      jerseyBox.innerHTML+=`
        <div class="jersey-list-item">
          <label>Jersey Peserta #${i+1}</label>
          <select onchange="changeSize(${i},this.value)">
            ${Object.keys(sizeChart).map(x=>`<option ${x===s?"selected":""}>${x}</option>`).join("")}
          </select>
        </div>`;
    });
    updateSize(jerseySizes[0]);
  }

  window.changeSize=function(i,v){jerseySizes[i]=v; updateSize(v);}

  function updateSize(s){
    let d=sizeChart[s];
    sizeDetail.innerHTML=`Info Ukuran <b>${s}</b>: LD ${d.ld}cm | P ${d.p}cm`;
  }

  /* ================== PAYMENT DETAIL LOGIC ================== */
  const payRadios = document.querySelectorAll('input[name="paymentMethod"]');
  
  function renderPaymentDetail() {
      const selected = document.querySelector('input[name="paymentMethod"]:checked');
      if (!selected) return;

      const type = selected.dataset.type;
      
      if (type === "BANK") {
          const bankName = selected.value;
          const rek = selected.dataset.rek;
          const an = selected.dataset.an;
          
          payDetailBox.innerHTML = `
            <div class="payment-rek-info">
                Transfer ke <b>${bankName}</b><br>
                <span class="rek-number" id="rekText">${rek}</span>
                a.n ${an}<br><br>
                <button class="copy-btn" onclick="copyRek()">Salin Nomor Rekening</button>
            </div>
          `;
      } else if (type === "QRIS") {
          const qrisUrl = "https://upload.wikimedia.org/wikipedia/commons/d/d0/QR_code_for_mobile_English_Wikipedia.svg"; 
          payDetailBox.innerHTML = `
            <div class="qris-display">
                <p>Scan QRIS berikut:</p>
                <img src="${qrisUrl}" alt="QRIS Code">
            </div>
          `;
      }
  }
  
  payRadios.forEach(r => r.addEventListener('change', renderPaymentDetail));
  window.copyRek = function() {
      const text = document.getElementById("rekText").innerText;
      navigator.clipboard.writeText(text).then(() => alert("Nomor rekening disalin!"));
  }

  /* ================== TOTAL RECALC ================== */
  function recalc(){
    let total = tickets.reduce((a,t)=>a+TICKET_DATA[t.type].price,0);

    ticketHint.textContent = tickets.length===1 ? "Mode: Solo" : `Mode: Kelompok (${tickets.length} Org)`;

    let mainType = tickets[0].type;
    uiTicketName.textContent = TICKET_DATA[mainType].name + (tickets.length > 1 && tickets.some(t=>t.type!==mainType) ? " (Mix)" : "");
    uiTicketImg.src = TICKET_DATA[mainType].img;
    
    uiTicketDetail.textContent = tickets.length+" Pax";
    uiTicketTotal.textContent = fmt(total);
    
    uiJerseyDetail.textContent = tickets.length + " Pcs";
    uiJerseyTotal.textContent = "Rp0 (Gratis)";
    
    uiGrand.textContent = fmt(total);
  }

  function fmt(n){return "Rp"+n.toLocaleString("id-ID");}

  /* ================== SUBMIT / WA INVOICE ================== */
  submitBtn.addEventListener("click", function(){
    
    // 0. Validasi Syarat & Ketentuan
    if(!tncCheckbox.checked) {
        alert("Mohon setujui syarat dan ketentuan terlebih dahulu.");
        return;
    }
    
    // 1. Ambil Data Semua Peserta
    const forms = document.querySelectorAll('.participant-card');
    let participantsData = [];
    let isComplete = true;

    forms.forEach((form, index) => {
        const name = form.querySelector('.input-name').value.trim();
        const gender = form.querySelector('.input-gender').value;
        const idType = form.querySelector('.input-id-type').value;
        const idNum = form.querySelector('.input-id-num').value.trim();
        const email = form.querySelector('.input-email').value.trim();
        const wa = form.querySelector('.input-wa').value.trim();
        const address = form.querySelector('.input-address').value.trim();

        // Validasi Wajib Isi Semua Field
        if(!name || !idNum || !email || !wa || !address) {
            isComplete = false;
        }

        participantsData.push({
            idx: index + 1,
            name: name,
            gender: gender,
            id: `${idType} - ${idNum}`,
            contact: `WA: ${wa} / Email: ${email}`,
            address: address
        });
    });

    if(!isComplete){
      alert("Mohon lengkapi seluruh data peserta (Nama, ID, Kontak, Alamat).");
      return;
    }

    // 2. Data Pembayaran
    const payMethod = document.querySelector('input[name="paymentMethod"]:checked');
    const payVal = payMethod.value;
    const total = tickets.reduce((a,t)=>a+TICKET_DATA[t.type].price,0);

    // 3. Susun Pesan WA (Format Invoice)
    let msg = `*PENDAFTARAN WARUTURI RUN 2026*\n`;
    msg += `--------------------------------\n`;
    
    // Loop Data Peserta
    participantsData.forEach((p, i) => {
        const ticketInfo = TICKET_DATA[tickets[i].type].name;
        const jerseyInfo = jerseySizes[i];
        
        msg += `üë§ *PESERTA ${p.idx}*\n`;
        msg += `Nama: ${p.name}\n`;
        msg += `Gender: ${p.gender}\n`;
        msg += `ID: ${p.id}\n`;
        msg += `${p.contact}\n`;
        msg += `Alamat: ${p.address}\n`;
        msg += `Tiket: ${ticketInfo}\n`;
        msg += `Jersey: Size ${jerseyInfo}\n`;
        msg += `\n`;
    });

    msg += `--------------------------------\n`;
    msg += `üí≥ *PEMBAYARAN*\n`;
    msg += `Metode: ${payVal}\n`;
    msg += `*TOTAL: ${fmt(total)}*\n`;
    msg += `--------------------------------\n`;
    msg += `Mohon konfirmasi pesanan ini. Terima kasih! üôè`;

    let url = "https://wa.me/6285198405846?text=" + encodeURIComponent(msg);
window.open(url, "_blank");


  });

  /* ================== INIT ================== */
  ticketQty.value=1;
  renderTicketList();
  renderJersey();
  renderPaymentDetail(); 
  recalc();

})();

// LOGIC MODAL POPUP
(function () {
  const modal = document.getElementById("regModal");
  const closeBtn = modal.querySelector(".close-modal");

  closeBtn.addEventListener("click", function () {
    modal.style.display = "none";
    document.body.style.overflow = ""; 
  });

  modal.addEventListener("click", function (e) {
    if (e.target === modal) {
      modal.style.display = "none";
      document.body.style.overflow = "";
    }
  });
})();
</script>

<script>
/* =====================================================
   OPEN POPUP TANPA INTERVENSI BROSUR
   ===================================================== */
window.openPopup = function(){

  const modal = document.getElementById("regModal");
  if(!modal){
    alert("Modal tidak ditemukan");
    return;
  }

  modal.style.display = "flex";

  /* RESET STATE POPUP (BIAR USER PILIH SENDIRI) */
  document.getElementById("ticketQty").value = 1;
  document.getElementById("jerseyQty").value = 1;

  document.querySelectorAll('input[name="raceCategory"]').forEach(r=>{
    r.checked = false;
  });

  setTimeout(()=>{
    renderJerseyInputs();
    recalc();
  },50);
};
</script>

  </main>

    <footer id="footer" class="footer position-relative dark-background">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">Wara Turi Fun Run</span>
          </a>
          <div class="footer-contact pt-3">
            <p>A108 Adam Street</p>
            <p>New York, NY 535022</p>
            <p class="mt-3"><strong>Phone:</strong> <span>+1 5589 55488 55</span></p>
            <p><strong>Email:</strong> <span>info@example.com</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="race.html">Race Informasi</a></li>
            <li><a href="tickets.html">Buy Ticket</a></li>
            <li><a href="regulasi.html">Regulasi</a></li>
            <li><a href="rute.html">Rute & Galeri</a></li>
          </ul>
        </div>


        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Hic solutasetp</h4>
          <ul>
            <li><a href="#">Molestiae accusamus iure</a></li>
            <li><a href="#">Excepturi dignissimos</a></li>
            <li><a href="#">Suscipit distinctio</a></li>
            <li><a href="#">Dilecta</a></li>
            <li><a href="#">Sit quas consectetur</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Nobis illum</h4>
          <ul>
            <li><a href="#">Ipsam</a></li>
            <li><a href="#">Laudantium dolorum</a></li>
            <li><a href="#">Dinera</a></li>
            <li><a href="#">Trodelas</a></li>
            <li><a href="#">Flexo</a></li>
          </ul>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>¬© <span>Copyright</span> <strong class="px-1 sitename">MyWebsite</strong> <span>All Rights Reserved</span></p>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>